<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025</title>
    <meta property="og:title" content="ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025">
    <meta property="og:description" content="&quot;é‡‘&quot;ã§ã¯ãªã&quot;æ™‚é–“&quot;ã‚’æ‡¸ã‘ãŸæ¸¾èº«ã®â€ã—ãŠã‚Šâ€">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://garuo615.github.io/travel-shiori/">
    <meta property="og:image" content="https://garuo615.github.io/travel-shiori/images/chara.png">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025">
    <meta name="twitter:description" content="&quot;é‡‘&quot;ã§ã¯ãªã&quot;æ™‚é–“&quot;ã‚’æ‡¸ã‘ãŸæ¸¾èº«ã®â€ã—ãŠã‚Šâ€">
    <meta name="twitter:image" content="https://garuo615.github.io/travel-shiori/images/chara.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">

    <style>
        /* äº¬éƒ½ãƒ»æ»‹è³€ æ—…ã®ã—ãŠã‚Šãƒ†ãƒ¼ãƒï¼ˆæš–è‰²ç³»ï¼‰ */
        :root {
            --primary-color: #ed6d3d; 
            --bg-color: #fdfcf8;      
            --text-color: #4a3b32;    
        }

        body {
            font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            text-align: center;
            user-select: none; /* é€£æ‰“æ™‚ã®é¸æŠé˜²æ­¢ */
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 60px 20px;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 10px rgba(237, 109, 61, 0.3);
        }
        
        h1 {
            margin: 0;
            font-size: 28px;
            letter-spacing: 2px;
            font-weight: normal;
        }
        
        .date {
            margin-top: 10px;
            font-size: 16px;
            opacity: 0.9;
            font-family: sans-serif;
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .menu {
            padding: 40px 20px 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }

        .menu-btn {
            display: block;
            background-color: white;
            color: var(--primary-color);
            text-decoration: none;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            font-weight: bold;
            font-family: sans-serif;
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(237, 109, 61, 0.2);
            position: relative;
        }

        .menu-btn:active {
            transform: translateY(2px);
            box-shadow: none;
            background-color: #fff5f0;
        }

        .icon {
            font-size: 24px;
            margin-right: 10px;
            vertical-align: middle;
        }

        /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ */
        #chara-container {
            position: relative; 
            margin: 60px auto 20px;
            width: 180px;
            z-index: 10;
            cursor: pointer;
            text-align: center;
            -webkit-tap-highlight-color: transparent;
        }

        #chara-img {
            width: 100%;
            height: auto;
            filter: drop-shadow(3px 3px 0px rgba(0,0,0,0.2)); 
            display: block;
            margin: 0 auto;
            transition: transform 0.1s;
        }
        
        #chara-container:active #chara-img {
            transform: scale(0.95) translateY(5px);
        }

        /* å¹ãå‡ºã— */
        #speech-bubble {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 260px;
            background: #fff;
            color: #4a3b32;
            border: 3px solid #ed6d3d;
            border-radius: 12px;
            padding: 15px;
            font-family: 'DotGothic16', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            display: none;
            box-shadow: 4px 4px 0px rgba(237, 109, 61, 0.2);
            z-index: 1001;
        }

        #speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #ed6d3d transparent transparent transparent;
        }
        
        #speech-bubble::before {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 7px 7px 0;
            border-style: solid;
            border-color: #fff transparent transparent transparent;
            z-index: 1;
        }

        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #888;
            padding-bottom: 20px;
            font-family: sans-serif;
        }
    </style>
</head>
<body>

    <header>
        <h1>ã«ã“ã¡ã‚ƒã‚“<br>èª•ç”Ÿæ—¥æ—…è¡Œ</h1>
        <div class="date">2025.12.24 - 12.25</div>
    </header>

    <div class="menu">

        <a href="schedule.html" class="menu-btn">
            <span class="icon">ğŸ“…</span> ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        </a>

        <a href="memories.html" class="menu-btn">
            <span class="icon">ğŸ“¸</span> æ€ã„å‡ºã‚¢ãƒ«ãƒãƒ 
        </a>

        <a href="mochimono.html" class="menu-btn">
            <span class="icon">ğŸ‘œ</span> æŒã¡ç‰©ãƒªã‚¹ãƒˆ
        </a>

        <a href="qa.html" class="menu-btn">
            <span class="icon">â“</span> æ—…ã®Q&A
        </a>

        <a href="#" class="menu-btn" id="special-present-btn"></a>
    </div>

    <div id="chara-container" onclick="talk()">
        <div id="speech-bubble"></div>
        <img id="chara-img" src="images/chara.png" alt="æ¡ˆå†…ã‚­ãƒ£ãƒ©">
    </div>

    <footer>
        Have a nice trip!
    </footer>

    <script>
        // === è¨­å®šãƒ»çŠ¶æ…‹å¤‰æ•° ===
        let tapCount = 0;       // é€£æ‰“åˆ¤å®šç”¨
        let rapidTapCount = 0;  // çŸ­æ™‚é–“é€£æ‰“ç”¨
        let tapResetTimer = null;
        
        let isTyping = false;
        let typingTimer = null;
        let angerCooldownTimer = null; // æ€’ã‚Šãƒ¢ãƒ¼ãƒ‰è§£é™¤ç”¨
        
        // ä¼šè©±ã‚­ãƒ¥ãƒ¼ï¼ˆé€£ç¶šã‚»ãƒªãƒ•ç”¨ï¼‰
        let conversationQueue = [];

        // ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼
        const STORAGE_INTRO_KEY = 'intro_done_v2';
        const STORAGE_24_KEY = 'first_24_done_v2';
        const STORAGE_25_KEY = 'first_25_done_v2';
        const STORAGE_AFTER_KEY = 'first_after_done_v2';
        
        const RELEASE_DATE = new Date('2025-12-25T00:00:00');

        // === ã‚»ãƒªãƒ•ãƒ‡ãƒ¼ã‚¿å®šç¾© ===

        // ğŸ”° è‡ªå·±ç´¹ä»‹ (åˆå›èµ·å‹•æ™‚)
        const introTexts = [
            "ã¯ã˜ã‚ã¾ã—ã¦ï¼\nä»Šå›ã®æ—…ã®æ¡ˆå†…äººã ã‚ˆã€‚",
            "åƒ•ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨\nã„ã‚ã„ã‚ãŠå–‹ã‚Šã™ã‚‹ã‚ˆã€‚",
            "ãã‚Œã˜ã‚ƒã‚ã€\næ¥½ã—ã„æ—…ã«ã—ã‚ˆã†ï¼"
        ];

        // A. åˆå›ç¢ºå®šã‚»ãƒªãƒ• (å„æœŸé–“ã®åˆå›ã‚¿ãƒƒãƒ—æ™‚)
        const firstTimeTexts = {
            "12/24": [
                "å¾…ã¡ã«å¾…ã£ãŸèª•ç”Ÿæ—¥æ—…è¡Œã ã­",
                "23æ­³æœ€å¾Œã®1æ—¥ã‚’æ¥½ã—ã‚‚ã†!!"
            ],
            "12/25": [
                "èª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼",
                "ã“ã‚Œã‹ã‚‰ã®1å¹´ã‚‚\næœ€é«˜ã®æ€ã„å‡ºã«ã—ã‚ˆã†ã­"
            ],
            "after": [
                "å¥‡è·¡çš„ãªæ™‚é–“ã ã£ãŸã­ã€ã€",
                "æ—…è¡Œã¯çµ‚ã‚ã£ã¡ã‚ƒã£ãŸã‘ã©\nå†¬ä¼‘ã¿ã¯ã¾ã ã¾ã ç¶šãã‚ˆ!!"
            ]
        };

        // B. æ¿€ãƒ¬ã‚¢ã‚»ãƒªãƒ• (5%) - æ–‡å­—åˆ—ã¾ãŸã¯é…åˆ—(é€£ç¶šã‚»ãƒªãƒ•)
        const rareTexts = [
            "ã„ã¤ã‹ã€€ãƒ’ãƒ’ãƒ€ãƒ«ãƒã«ã€€ãªã‚‹ã²ã‚’ã€€ã‚†ã‚ã¿ã¦ã€€ã‚±ãƒ„ã‚¤ãŒã€€ã¿ãªãã£ãŸ",
            "ãã®ã†ã®ã€€ã‚†ã†ã¯ã‚“ã‚’ã€€ãŠã‚‚ã„ã ã—ã¦ã€€ã‚±ãƒ„ã‚¤ãŒã€€ã¿ãªãã£ãŸ",
            "ãŠãµã¨ã‚“ã®ã€€ã¬ãã‚‚ã‚Šã‚’ã€€ãŠã‚‚ã„ã ã—ã¦ã€€ã‚±ãƒ„ã‚¤ãŒã€€ã¿ãªãã£ãŸ",
            "ã¾ãƒ¼ã¡ã‚ƒã‚“ã”ã‚ã‚“ã­",
            "å³ã—ã•ã®ãªã‹ã«ã‚ã‚‹",
            "ã‚¹ã‚«ã—ãŸãªï¼Ÿ",
            // ãƒã‚±ãƒ¢ãƒ³ã‚ã°ã‚Œã‚‹ (é€£ç¶š)
            [
                "ãƒ€ãƒ«ãƒãƒƒã‚«ã®ã€€ã‚ã°ã‚Œã‚‹ï¼",
                "ãƒ€ãƒ«ãƒãƒƒã‚«ã¯ã€€ã‚ã°ã‚Œã¦ã„ã‚‹ï¼",
                "ãƒ€ãƒ«ãƒãƒƒã‚«ã¯ã€€ã¤ã‹ã‚Œã¯ã¦ã¦ã€€ã“ã‚“ã‚‰ã‚“ã—ã¦ã—ã¾ã£ãŸï¼"
            ],
            // ãƒã‚±ãƒ¢ãƒ³æ”»æ’ƒ (é€£ç¶š)
            [
                "ãƒ€ãƒ«ãƒãƒƒã‚«ã®ã€€ã»ã®ãŠã®ãƒ‘ãƒ³ãƒï¼",
                "ãƒ€ãƒ«ãƒãƒƒã‚«ã®ã€€ã“ã†ã’ãã¯ã€€ã¯ãšã‚ŒãŸï¼"
            ],
            // Undertale (é€£ç¶š)
            [
                "......",
                "......",
                "......",
                "ï¼Šã—ã‹ã—ã€€ã ã‚Œã‚‚ã“ãªã‹ã£ãŸã€‚"
            ]
        ];

        // C. æ€’ã‚Šã‚»ãƒªãƒ•
        const angryTexts = [
            "â€¦â€¦ã€‚",
            "ã¡ã‚‡ã£ã¨è§¦ã‚Šã™ãã˜ã‚ƒãªã„ï¼Ÿ",
            "ã­ãˆã€ã—ã¤ã“ã„ã‚ˆãƒ¼ï¼",
            "ã‚‚ã—ã‹ã—ã¦ã€\nãƒ’ãƒãªã®ï¼Ÿ",
            "ç”»é¢ã€æ“¦ã‚Šåˆ‡ã‚Œãªã„ï¼Ÿ",
            "æ’«ã§ãã‚‰ã‚Œã¡ã‚ƒã†ã‚ˆï¼",
            "ç«å‚·ã—ã¡ã‚ƒã†ã‚ˆï¼Ÿ",
            "ãã™ãã£ãŸã„ã‚ˆãƒ¼",
            "å……é›»ãŒã‚‚ã‚›ã£ãŸã ã„ã£!!!!"
        ];

        // D-J. é€šå¸¸ãƒ»æ¡ä»¶ã‚»ãƒªãƒ• (ãƒ—ãƒ¼ãƒ«ç”¨)
        const normalPool = {
            // D. ã„ã¤ã§ã‚‚
            always: [
                "ã­ãˆã€ä»Šæ¥½ã—ã„ï¼Ÿ\nåƒ•ã¯æœ€é«˜ã«æ¥½ã—ã„ã‚ˆã€‚",
                "ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰\næ€ã„å‡ºã‚¢ãƒ«ãƒãƒ æ›´æ–°ã—ã¦ã­ã€‚",
                "ãƒˆã‚¤ãƒ¬å¤§ä¸ˆå¤«ï¼Ÿ\næˆ‘æ…¢ã¯ä½“ã«æ¯’ã ã‚ˆã€‚",
                "ã“ã®ã‚¢ãƒ—ãƒªã®åˆ¶ä½œè²»ã¯\n0å††ã§ã™ï¼",
                "å›°ã£ãŸã¨ãã¯\nQ&Aãƒšãƒ¼ã‚¸ã‚’è¦‹ã¦ã¿ã¦ï¼"
            ],
            // E. æœ (5:00-9:00)
            morning: [
                "ãµã‚ãâ€¦ãŠã¯ã‚ˆã†ã€‚\nã‚ˆãçœ ã‚ŒãŸï¼Ÿ",
                "æœã ã‚ˆãƒ¼ï¼\næº–å‚™ã¯é †èª¿ï¼Ÿ",
                "ä»Šæ—¥ã‚‚ä¸€æ—¥\næ¥½ã—ã‚“ã§ã„ã“ã†ï¼",
                "å¿˜ã‚Œç‰©ãªã„ï¼Ÿ\nã‚¹ãƒãƒ›ã€è²¡å¸ƒã€æ„›å¬Œã€‚",
                "æœã”ã¯ã‚“ã¯\nã—ã£ã‹ã‚Šé£Ÿã¹ã‚ˆã†ã­ã€‚"
            ],
            // F. å¤œ (22:00-4:59)
            night: [
                "ã‚‚ã†å¯ã‚‹æ™‚é–“ã ã‚ˆã€‚\nãŠã‚„ã™ã¿ã€‚",
                "æ˜æ—¥ã‚‚æ—©ã„ã‹ã‚‰\næ—©ãå¯ãªã•ã„ï¼",
                "ä»Šæ—¥ä¸€æ—¥ãŠç–²ã‚Œæ§˜ã€‚\nã„ã„å¤¢è¦‹ã¦ã­ã€‚",
                "å¤œæ›´ã‹ã—ã¯ãŠè‚Œã®æ•µã€‚\nã‚¹ãƒãƒ›ç½®ã„ã¦å¯ã‚ˆã†ã€‚",
                "Zzz...\n(å¯ãŸãµã‚Šã‚’ã—ã¦ã„ã‚‹)"
            ],
            // G. 12/23
            day23: [
                "ã„ã‚ˆã„ã‚ˆæ˜æ—¥ã ã­ï¼\næº–å‚™ã¯ãƒãƒƒãƒãƒªï¼Ÿ",
                "æ—©ãå¯ãªã„ã¨\næ˜æ—¥å¯åŠã™ã‚‹ã‚ˆï¼Ÿ",
                "æ¥½ã—ã¿ã™ãã¦\nåƒ•ãŒçœ ã‚Œãªã„ã‹ã‚‚ã€‚"
            ],
            // H. 12/24
            day24: [
                "æ—…ã®ï¼‘æ—¥ç›®ã£ã¦ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹ã‚ˆã­",
                "å¯’ããªã„ï¼Ÿ\næ¸©ã‹ãã—ã¦ã­ã€‚",
                "23æ­³ã‚‚æ®‹ã‚Šå°‘ã—ã ã­",
                "èª•ç”Ÿæ—¥ã‚¤ãƒ–ã£ã¦ã“ã¨ã€ã€ï¼Ÿ"
            ],
            // I. 12/25
            day25: [
                "ãƒãƒƒãƒ”ãƒ¼ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼ï¼\nä¸»å½¹ã®ãŠå‡ºã¾ã—ã ï¼ã€",
                "ãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ï¼\nãã—ã¦ãŠã‚ã§ã¨ã†ã€‚",
                "ä»Šæ—¥ã‚‚æ»‹è³€çœŒï¼\nçµç¶æ¹–ãŒè¦‹ãˆã‚‹ã‹ãªï¼Ÿ",
                "å¸°ã‚ŠãŸããªã„ãªãâ€¦\nã‚‚ã£ã¨ä¸€ç·’ã«ã„ãŸã„ã­ã€‚"
            ],
            // J. 12/26ä»¥é™
            dayAfter: [
                "ãŠã‹ãˆã‚Šãªã•ã„ã€‚\næ¥½ã—ã‹ã£ãŸã­ï¼",
                "å†™çœŸã‚’è¦‹è¿”ã—ã¦\nãƒ‹ãƒ¤ãƒ‹ãƒ¤ã—ã‚ˆã†ã€‚",
                "æ¬¡ã®æ—…è¡Œã¯\nã©ã“ã«è¡Œã“ã†ã‹ï¼Ÿ",
                "ç¾å®Ÿã«æˆ»ã‚‹æ™‚é–“ã â€¦\nã§ã‚‚æ€ã„å‡ºã¯ãšã£ã¨æ®‹ã‚‹ã‚ˆã€‚",
                "æ—…ã®ç–²ã‚Œã€\nã¡ã‚ƒã‚“ã¨ç™’ã‚„ã—ã¦ã­ã€‚"
            ]
        };


        // === ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ ===

        function talk() {
            const bubble = document.getElementById('speech-bubble');
            
            // ã‚¿ã‚¤ãƒ”ãƒ³ã‚°é€”ä¸­ãªã‚‰å³æ™‚å®Œäº†ã•ã›ã‚‹ç­‰ã®å‡¦ç†ã¯çœç•¥ã—ã€
            // æ¯å›ãƒªã‚»ãƒƒãƒˆã—ã¦æ–°ã—ã„ã‚»ãƒªãƒ•ã‚’è¡¨ç¤ºã™ã‚‹ã‚¹ã‚¿ã‚¤ãƒ«
            if (isTyping) {
                clearTimeout(typingTimer);
                isTyping = false;
            }

            // --- 0. ä¼šè©±ã‚­ãƒ¥ãƒ¼ï¼ˆé€£ç¶šã‚»ãƒªãƒ•ï¼‰ãŒæ®‹ã£ã¦ã„ã‚‹å ´åˆ ---
            // æœ€å„ªå…ˆã§ç¶šãã‚’å–‹ã‚‹
            if (conversationQueue.length > 0) {
                const nextMsg = conversationQueue.shift();
                showBubble(nextMsg);
                return;
            }

            // ç¾åœ¨æ™‚åˆ»ã®å–å¾—
            const now = new Date();
            const month = now.getMonth() + 1;
            const date = now.getDate();
            const hour = now.getHours();

            // --- 1. åˆå¯¾é¢ï¼ˆè‡ªå·±ç´¹ä»‹ï¼‰ ---
            if (!localStorage.getItem(STORAGE_INTRO_KEY)) {
                // è‡ªå·±ç´¹ä»‹ã‚­ãƒ¥ãƒ¼ã‚’ã‚»ãƒƒãƒˆã—ã¦é–‹å§‹
                conversationQueue = [...introTexts]; 
                const firstMsg = conversationQueue.shift();
                showBubble(firstMsg);
                
                // ã“ã“ã§ã¯ã€Œä¸€åº¦è©±ã—å§‹ã‚ãŸã‚‰æ—¢èª­ã€æ‰±ã„ã«ã™ã‚‹
                localStorage.setItem(STORAGE_INTRO_KEY, 'true');
                return;
            }

            // --- 2. æ—¥ä»˜åˆ¥ãƒ»åˆå›ç¢ºå®šã‚»ãƒªãƒ•ï¼ˆæœ€å„ªå…ˆï¼‰ ---
            // 12/24ã®åˆå›
            if (month === 12 && date === 24 && !localStorage.getItem(STORAGE_24_KEY)) {
                conversationQueue = [...firstTimeTexts["12/24"]];
                showBubble(conversationQueue.shift());
                localStorage.setItem(STORAGE_24_KEY, 'true');
                return;
            }
            // 12/25ã®åˆå›
            if (month === 12 && date === 25 && !localStorage.getItem(STORAGE_25_KEY)) {
                conversationQueue = [...firstTimeTexts["12/25"]];
                showBubble(conversationQueue.shift());
                localStorage.setItem(STORAGE_25_KEY, 'true');
                return;
            }
            // 12/26ä»¥é™ã®åˆå›
            if ((month === 12 && date >= 26) || month === 1) { // å¹´è¶Šã—ã‚‚è€ƒæ…®
                if (!localStorage.getItem(STORAGE_AFTER_KEY)) {
                    conversationQueue = [...firstTimeTexts["after"]];
                    showBubble(conversationQueue.shift());
                    localStorage.setItem(STORAGE_AFTER_KEY, 'true');
                    return;
                }
            }


            // --- é€£æ‰“åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ ---
            // 3ç§’ä»¥å†…ã«11å›ã‚¿ãƒƒãƒ—ã•ã‚ŒãŸã‚‰æ€’ã‚Šãƒ¢ãƒ¼ãƒ‰ã¸ç§»è¡Œ
            rapidTapCount++;
            if (tapResetTimer) clearTimeout(tapResetTimer);
            tapResetTimer = setTimeout(() => {
                rapidTapCount = 0;
            }, 3000); // 3ç§’ã§ãƒªã‚»ãƒƒãƒˆ

            if (rapidTapCount >= 11) {
                // æ€’ã‚Šãƒ¢ãƒ¼ãƒ‰ç™ºå‹•ï¼ˆ30ç§’é–“ï¼‰
                if (angerCooldownTimer) clearTimeout(angerCooldownTimer);
                angerCooldownTimer = setTimeout(() => {
                    rapidTapCount = 0; // 30ç§’å¾Œã«è§£é™¤
                    console.log("æ©Ÿå«ŒãŒç›´ã‚Šã¾ã—ãŸ");
                }, 30000);
            }

            // æ€’ã‚Šãƒ¢ãƒ¼ãƒ‰ä¸­ã®å ´åˆ
            // ãŸã ã—ã€ä½ç¢ºç‡(5%)ã®æ¿€ãƒ¬ã‚¢ã‚»ãƒªãƒ•ã¯æ€’ã‚Šä¸­ã§ã‚‚å‡ºã‚‹
            const isAngry = (rapidTapCount >= 11);
            const isRare = (Math.random() < 0.05); // 5%

            // --- 3. æ¿€ãƒ¬ã‚¢ã‚»ãƒªãƒ• (5%) ---
            if (isRare) {
                const rareItem = pickRandom(rareTexts);
                if (Array.isArray(rareItem)) {
                    // é€£ç¶šã‚»ãƒªãƒ•ã®å ´åˆ
                    conversationQueue = [...rareItem];
                    showBubble(conversationQueue.shift());
                } else {
                    showBubble(rareItem);
                }
                return;
            }

            // --- 4. æ€’ã‚Šãƒ¢ãƒ¼ãƒ‰ (é€£æ‰“ä¸­) ---
            if (isAngry) {
                showBubble(pickRandom(angryTexts));
                return;
            }

            // --- 5. é€šå¸¸ãƒ¢ãƒ¼ãƒ‰ (æ··åˆæŠ½é¸) ---
            let candidatePool = [...normalPool.always]; // åŸºæœ¬ã‚»ãƒƒãƒˆ

            // æ™‚é–“å¸¯è¿½åŠ 
            // æœ: 5:00 - 9:00
            if (hour >= 5 && hour < 9) {
                candidatePool = candidatePool.concat(normalPool.morning);
            }
            // å¤œ: 22:00 - 4:59
            if (hour >= 22 || hour < 5) {
                candidatePool = candidatePool.concat(normalPool.night);
            }

            // æ—¥ä»˜è¿½åŠ 
            if (month === 12) {
                if (date === 23) candidatePool = candidatePool.concat(normalPool.day23);
                if (date === 24) candidatePool = candidatePool.concat(normalPool.day24);
                if (date === 25) candidatePool = candidatePool.concat(normalPool.day25);
                if (date >= 26)  candidatePool = candidatePool.concat(normalPool.dayAfter);
            } else if (month === 1) { // 1æœˆã‚‚ã€Œæ—…è¡Œå¾Œã€æ‰±ã„
                candidatePool = candidatePool.concat(normalPool.dayAfter);
            }

            // æŠ½é¸
            const message = pickRandom(candidatePool);
            showBubble(message);
        }

        // --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ ---

        function pickRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function showBubble(text) {
            const bubble = document.getElementById('speech-bubble');
            bubble.style.display = "block";
            bubble.innerHTML = "";
            typeWriter(text, bubble, 0);
        }

        function typeWriter(text, element, index) {
            isTyping = true;
            if (text.charAt(index) === "\n") {
                element.innerHTML += "<br>";
            } else {
                element.innerHTML += text.charAt(index);
            }

            if (index < text.length - 1) {
                const speed = 40 + Math.random() * 30; // å°‘ã—æ—©ã‚ã«
                typingTimer = setTimeout(() => {
                    typeWriter(text, element, index + 1);
                }, speed);
            } else {
                isTyping = false;
            }
        }

        // ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãƒœã‚¿ãƒ³åˆ¶å¾¡
        function checkSpecialPresent() {
            const btn = document.getElementById('special-present-btn');
            const now = new Date();

            if (now >= RELEASE_DATE) {
                btn.href = "coupon.html"; 
                btn.innerHTML = '<span class="icon">ğŸ</span> ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ';
                btn.style.backgroundColor = '#fff0f5';
                btn.style.borderColor = '#ff69b4';
                btn.style.color = '#ff69b4';
                btn.style.pointerEvents = 'auto'; 
                btn.style.opacity = '1';
            } else {
                btn.href = "#"; 
                btn.innerHTML = '<span class="icon">ğŸ”’</span> ????';
                btn.style.backgroundColor = '#f0f0f0';
                btn.style.borderColor = '#ccc';
                btn.style.color = '#aaa';
                btn.style.pointerEvents = 'none'; 
                btn.style.opacity = '1';
            }
            btn.style.display = 'block'; 
        }

        document.addEventListener('DOMContentLoaded', checkSpecialPresent);

    </script>
</body>
</html>