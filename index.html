<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025</title>

    <meta property="og:title" content="ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025">
    <meta property="og:description" content="&quot;é‡‘&quot;ã§ã¯ãªã&quot;æ™‚é–“&quot;ã‚’æ‡¸ã‘ãŸæ¸¾èº«ã®â€ã—ãŠã‚Šâ€">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://garuo615.github.io/travel-shiori/">
    <meta property="og:image" content="https://garuo615.github.io/travel-shiori/images/chara.png">
    
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="ã«ã“ã¡ã‚ƒã‚“èª•ç”Ÿæ—¥æ—…è¡Œ 2025">
    <meta name="twitter:description" content="&quot;é‡‘&quot;ã§ã¯ãªã&quot;æ™‚é–“&quot;ã‚’æ‡¸ã‘ãŸæ¸¾èº«ã®â€ã—ãŠã‚Šâ€">
    <meta name="twitter:image" content="https://garuo615.github.io/travel-shiori/images/chara.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¬éƒ½ãƒ»æ»‹è³€ æ—…ã®ã—ãŠã‚Š</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">

    <style>
        /* äº¬éƒ½ãƒ»æ»‹è³€ æ—…ã®ã—ãŠã‚Šãƒ†ãƒ¼ãƒï¼ˆæš–è‰²ç³»ï¼‰ */
        :root {
            --primary-color: #ed6d3d; /* æ·±ã„ã‚ªãƒ¬ãƒ³ã‚¸ */
            --bg-color: #fdfcf8;      /* å’Œç´™ã®ã‚ˆã†ãªã‚ªãƒ•ãƒ›ãƒ¯ã‚¤ãƒˆ */
            --text-color: #4a3b32;    /* ç„¦ã’èŒ¶è‰² */
        }

        body {
            font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            text-align: center;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 60px 20px;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 10px rgba(237, 109, 61, 0.3);
        }
        
        h1 {
            margin: 0;
            font-size: 28px;
            letter-spacing: 2px;
            font-weight: normal;
        }
        
        .date {
            margin-top: 10px;
            font-size: 16px;
            opacity: 0.9;
            font-family: sans-serif;
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .menu {
            padding: 40px 20px 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }

        /* ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .menu-btn {
            display: block;
            background-color: white;
            color: var(--primary-color);
            text-decoration: none;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            font-weight: bold;
            font-family: sans-serif;
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(237, 109, 61, 0.2);
            position: relative;
        }

        .menu-btn:active {
            transform: translateY(2px);
            box-shadow: none;
            background-color: #fff5f0;
        }

        .icon {
            font-size: 24px;
            margin-right: 10px;
            vertical-align: middle;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #888;
            padding-bottom: 20px;
            font-family: sans-serif;
        }

        /* ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ */
        #chara-container {
            position: relative; 
            margin: 60px auto 20px;
            width: 180px;
            z-index: 10;
            cursor: pointer;
            text-align: center;
        }

        #chara-img {
            width: 100%;
            height: auto;
            filter: drop-shadow(3px 3px 0px rgba(0,0,0,0.2)); 
            display: block;
            margin: 0 auto;
        }
        
        #chara-container:active #chara-img {
            transform: scale(0.95) translateY(5px);
        }

        /* å¹ãå‡ºã—ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        #speech-bubble {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            width: 260px;
            background: #fff;
            color: #4a3b32;
            border: 3px solid #ed6d3d;
            border-radius: 12px;
            padding: 15px;
            font-family: 'DotGothic16', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            display: none;
            box-shadow: 4px 4px 0px rgba(237, 109, 61, 0.2);
            z-index: 1001;
        }

        #speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #ed6d3d transparent transparent transparent;
        }
        
        #speech-bubble::before {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 7px 7px 0;
            border-style: solid;
            border-color: #fff transparent transparent transparent;
            z-index: 1;
        }

        /* ãƒ‡ãƒãƒƒã‚°ã‚¨ãƒªã‚¢ */
        #debug-area {
            background-color: #eee;
            color: #333;
            padding: 15px;
            margin: 30px auto;
            border-radius: 10px;
            max-width: 90%;
            font-family: sans-serif;
            font-size: 14px;
            text-align: center;
            border: 2px dashed #999;
        }

        .debug-btn {
            background: #fff;
            border: 1px solid #ccc;
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }
        .debug-btn:hover { background: #ddd; }
        .current-time-display {
            font-weight: bold;
            color: #ed6d3d;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ã«ã“ã¡ã‚ƒã‚“<br>èª•ç”Ÿæ—¥æ—…è¡Œ</h1>
        <div class="date">2025.12.24 - 12.25</div>
    </header>

    <div class="menu">
        <p>æ—…ã®æº–å‚™ã‚’å§‹ã‚ã¾ã—ã‚‡ã†</p>

        <a href="mochimono.html" class="menu-btn">
            <span class="icon">ğŸ‘œ</span> æŒã¡ç‰©ãƒªã‚¹ãƒˆ
        </a>

        <a href="schedule.html" class="menu-btn">
            <span class="icon">ğŸ“…</span> ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        </a>

        <a href="memories.html" class="menu-btn">
            <span class="icon">ğŸ“¸</span> æ€ã„å‡ºã‚¢ãƒ«ãƒãƒ 
        </a>

        <a href="#" class="menu-btn" style="opacity: 0.5; cursor: default;">
            <span class="icon">ğŸ—ºï¸</span> ãƒãƒƒãƒ— (æº–å‚™ä¸­)
        </a>

        <a href="#" class="menu-btn" id="special-present-btn">
            </a>
    </div>

    <div id="chara-container" onclick="talk()">
        <div id="speech-bubble"></div>
        <img id="chara-img" src="images/chara.png" alt="æ¡ˆå†…ã‚­ãƒ£ãƒ©">
    </div>

    <footer>
        Have a nice trip!
    </footer>

    <div id="debug-area">
        <h3>ğŸ”§ å‹•ä½œç¢ºèªãƒ¢ãƒ¼ãƒ‰</h3>
        <p>æ™‚é–“ã‚’å½è£…ã—ã¦ã€ã‚­ãƒ£ãƒ©ã®åå¿œãƒ†ã‚¹ãƒˆãŒã§ãã¾ã™</p>
        
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T14:00')">ğŸ„ 1æ—¥ç›®(12/24)</button>
        <button class="debug-btn" onclick="setFakeTime('2025-12-25T14:00')">ğŸ 2æ—¥ç›®(12/25)</button>
        <br>
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T07:00')">â˜€ï¸ æœ (7:00)</button>
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T23:00')">ğŸŒ™ å¤œ (23:00)</button>
        <br>
        <button class="debug-btn" onclick="resetIntro()" style="background:#ffeb3b;">ğŸ”° è‡ªå·±ç´¹ä»‹ãƒªã‚»ãƒƒãƒˆ</button>
        <button class="debug-btn" onclick="resetTime()" style="background:#ffcccc;">ğŸ•’ æ™‚é–“ãƒªã‚»ãƒƒãƒˆ</button>
        
        <div class="current-time-display" id="debug-display">ç¾åœ¨æ™‚åˆ»: é€šå¸¸ãƒ¢ãƒ¼ãƒ‰</div>
    </div>

    <script>
        // === è¨­å®šå¤‰æ•° ===
        let tapCount = 0;
        let isTyping = false;
        let typingTimer = null;
        let resetTimer = null; // æ©Ÿå«Œãƒªã‚»ãƒƒãƒˆç”¨ã®ã‚¿ã‚¤ãƒãƒ¼
        let currentTimeOverride = null; // ãƒ‡ãƒãƒƒã‚°ç”¨æ™‚é–“

        const STORAGE_INTRO_KEY = 'travel_intro_done_v1';

        // â˜…ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆè§£ç¦æ—¥æ™‚ï¼ˆ2025å¹´12æœˆ25æ—¥ 00:00:00ï¼‰
        const RELEASE_DATE = new Date('2025-12-25T00:00:00');

        // --- ã‚»ãƒªãƒ•ãƒ‡ãƒ¼ã‚¿ ---

        const introTexts = [
            "ã¯ã˜ã‚ã¾ã—ã¦ï¼\nä»Šå›ã®æ—…ã®æ¡ˆå†…äººã ã‚ˆã€‚",
            "åƒ•ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨\nã„ã‚ã„ã‚ãŠå–‹ã‚Šã™ã‚‹ã‚ˆã€‚",
            "ãã‚Œã˜ã‚ƒã‚ã€\næ¥½ã—ã„æ—…ã«ã—ã‚ˆã†ï¼"
        ];

        const annoyedTexts = [
            "â€¦â€¦ã€‚",
            "ãã‚“ãªã«è§¦ã‚‰ãªã„ã§ã€‚",
            "ã­ãˆã€ã—ã¤ã“ã„ã‚ˆï¼Ÿ",
            "ã‚‚ã—ã‹ã—ã¦ã€\nãƒ’ãƒãªã®ï¼Ÿ",
            "ã‚±ãƒ„ã‚¤ãŒã¿ãªãã£ã¦ããŸã€‚",
            "ç”»é¢ã€æ“¦ã‚Šåˆ‡ã‚Œãªã„ï¼Ÿ"
        ];

        const dateTexts = {
            "12/24": [
                "ã¤ã„ã«å½“æ—¥ã ã­ï¼\nãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ï¼",
                "æ–°å¹¹ç·šã®æ™‚é–“ã¯å¤§ä¸ˆå¤«ï¼Ÿ",
                "ä»Šæ—¥ã¯ãŸãã•ã‚“æ­©ãã‚ˆï½"
            ],
            "12/25": [
                "æ˜¨æ—¥ã®å¤œã¯æ¥½ã—ã‹ã£ãŸã­ã€‚",
                "è¶³ã€ç—›ããªã„ï¼Ÿ\nç„¡ç†ã—ãªã„ã§ã­ã€‚",
                "ã¾ã å¸°ã‚ŠãŸããªã„ãªã..."
            ]
        };

        const omikujiTexts = [
            "ä»Šæ—¥ã®é‹å‹¢ã¯...å¤§å‰ï¼\nè‰¯ã„ã“ã¨ã‚ã‚‹ã‚ˆï¼",
            "ä»Šæ—¥ã®é‹å‹¢ã¯...ä¸­å‰ã€‚\næŠ¹èŒ¶ã‚¹ã‚¤ãƒ¼ãƒ„ãŒå‰ã€‚",
            "ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ã¯\nã€å…«ãƒ„æ©‹ã€ã ã‚ˆã€‚"
        ];

        const timeTexts = {
            morning: [
                "ãµã‚ã...ãŠã¯ã‚ˆã†ã€‚\næ—©èµ·ãã ã­ã€‚",
                "æœã”ã¯ã‚“ã¯é£Ÿã¹ãŸï¼Ÿ"
            ],
            night: [
                "ã‚‚ã†å¯ã‚‹æ™‚é–“ã ã‚ˆã€‚",
                "...æ˜æ—¥ã«å‚™ãˆã¦Zzz",
                "å¤œæ›´ã‹ã—ã¯ãŠè‚Œã«æ‚ªã„ã‚ˆã€‚"
            ]
        };

        const normalTexts = [
            "äº¬éƒ½ã¸ã‚ˆã†ã“ãï¼",
            "æº–å‚™ã¯ãƒãƒƒãƒãƒªï¼Ÿ",
            "å³ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚‚è¦‹ã¦ã­ã€‚",
            "å†™çœŸã‚’ãŸãã•ã‚“æ’®ã‚ã†ï¼",
            "åƒ•ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚‚\nä½•ã‚‚å‡ºãªã„ã‚ˆ...å¤šåˆ†ã€‚",
            "ãŠåœŸç”£ã¯ä½•ã‚’è²·ã†äºˆå®šï¼Ÿ",
            "ãƒ¯ã‚¯ãƒ¯ã‚¯ã—ã¦ããŸï¼"
        ];

        // === ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ ===

        function talk() {
            const bubble = document.getElementById('speech-bubble');
            
            if (isTyping) {
                clearTimeout(typingTimer);
                isTyping = false;
            }

            if (resetTimer) clearTimeout(resetTimer);

            tapCount++;
            let message = "";

            const now = currentTimeOverride ? new Date(currentTimeOverride) : new Date();
            const dateStr = (now.getMonth() + 1) + "/" + now.getDate();
            const hour = now.getHours();
            updateDebugDisplay(now);

            const isIntroDone = localStorage.getItem(STORAGE_INTRO_KEY);
            if (!isIntroDone) {
                if (tapCount <= introTexts.length) {
                    message = introTexts[tapCount - 1];
                } 
                if (tapCount >= introTexts.length) {
                    localStorage.setItem(STORAGE_INTRO_KEY, 'true');
                    setTimeout(() => { tapCount = 0; }, 5000); 
                }
            } 
            else {
                if (tapCount > 10 && Math.random() < 0.3) {
                    message = pickRandom(annoyedTexts);
                }
                else if (dateTexts[dateStr]) {
                    message = pickRandom(dateTexts[dateStr]);
                }
                else if (Math.random() < 0.1) {
                    message = pickRandom(omikujiTexts);
                }
                else if (hour >= 5 && hour <= 9) {
                    message = pickRandom(timeTexts.morning);
                }
                else if (hour >= 22 || hour <= 4) {
                    message = pickRandom(timeTexts.night);
                }
                else {
                    message = pickRandom(normalTexts);
                }
            }

            bubble.style.display = "block";
            bubble.innerHTML = "";
            typeWriter(message, bubble, 0);

            resetTimer = setTimeout(() => {
                tapCount = 0;
                console.log("æ©Ÿå«ŒãŒç›´ã‚Šã¾ã—ãŸ");
            }, 30000);
        }

        function pickRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function typeWriter(text, element, index) {
            isTyping = true;
            if (text.charAt(index) === "\n") {
                element.innerHTML += "<br>";
            } else {
                element.innerHTML += text.charAt(index);
            }

            if (index < text.length - 1) {
                const speed = 50 + Math.random() * 50; 
                typingTimer = setTimeout(() => {
                    typeWriter(text, element, index + 1);
                }, speed);
            } else {
                isTyping = false;
            }
        }

        function setFakeTime(timeStr) {
            currentTimeOverride = timeStr;
            const fakeDate = new Date(timeStr);
            alert(`ç¾åœ¨æ™‚åˆ»ã‚’ã€${timeStr}ã€‘ã«è¨­å®šã—ã¾ã—ãŸã€‚\nã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);
            updateDebugDisplay(fakeDate);
            tapCount = 0; 
            
            checkSpecialPresent(); // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
        }

        function setManualTime() {
            const val = document.getElementById('manualDebugTime').value;
            if(val) setFakeTime(val);
        }

        function resetTime() {
            currentTimeOverride = null;
            alert("æœ¬æ¥ã®ç¾åœ¨æ™‚åˆ»ã«æˆ»ã—ã¾ã—ãŸã€‚");
            updateDebugDisplay(new Date());

            checkSpecialPresent(); // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹æ›´æ–°
        }

        function resetIntro() {
            localStorage.removeItem(STORAGE_INTRO_KEY);
            tapCount = 0;
            alert("è‡ªå·±ç´¹ä»‹ã‚’æœªèª­çŠ¶æ…‹ã«æˆ»ã—ã¾ã—ãŸã€‚\næœ€åˆã‹ã‚‰ã‚¿ãƒƒãƒ—ã—ã¦ã¿ã¦ãã ã•ã„ã€‚");
        }

        function updateDebugDisplay(dateObj) {
            const display = document.getElementById('debug-display');
            const str = `${dateObj.getMonth()+1}/${dateObj.getDate()} ${dateObj.getHours()}:${String(dateObj.getMinutes()).padStart(2,'0')}`;
            const status = currentTimeOverride ? "å½è£…ä¸­" : "é€šå¸¸";
            display.innerText = `ç¾åœ¨æ™‚åˆ»(${status}): ${str}`;
        }

        // â–¼ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆè¡¨ç¤ºãƒã‚§ãƒƒã‚¯é–¢æ•°ï¼ˆæ”¹ä¿®ç‰ˆï¼‰
        function checkSpecialPresent() {
            const btn = document.getElementById('special-present-btn');
            const now = currentTimeOverride ? new Date(currentTimeOverride) : new Date();

            if (now >= RELEASE_DATE) {
                // ã€è§£ç¦ã€‘ 12/25ä»¥é™
                btn.href = "coupon.html"; // ãƒªãƒ³ã‚¯æœ‰åŠ¹åŒ–
                btn.innerHTML = '<span class="icon">ğŸ</span> ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆ';
                
                // ãƒ”ãƒ³ã‚¯è‰²ã®ãƒ‡ã‚¶ã‚¤ãƒ³
                btn.style.backgroundColor = '#fff0f5';
                btn.style.borderColor = '#ff69b4';
                btn.style.color = '#ff69b4';
                btn.style.pointerEvents = 'auto'; // ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã«
                btn.style.opacity = '1';
            } else {
                // ã€ãƒ­ãƒƒã‚¯ä¸­ã€‘ 12/24ä»¥å‰
                btn.href = "#"; // ãƒªãƒ³ã‚¯ç„¡åŠ¹åŒ–
                btn.innerHTML = '<span class="icon">ğŸ”’</span> ????';
                
                // ã‚°ãƒ¬ãƒ¼ã®ãƒ‡ã‚¶ã‚¤ãƒ³
                btn.style.backgroundColor = '#f0f0f0';
                btn.style.borderColor = '#ccc';
                btn.style.color = '#aaa';
                btn.style.pointerEvents = 'none'; // ã‚¯ãƒªãƒƒã‚¯ä¸å¯ã«ï¼ˆæŠ¼ã—ã¦ã‚‚åå¿œã—ãªã„ï¼‰
                btn.style.opacity = '1';
            }
            // å¸¸ã«è¡¨ç¤ºã¯ã—ã¦ãŠã
            btn.style.display = 'block'; 
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
        document.addEventListener('DOMContentLoaded', checkSpecialPresent);

    </script>
</body>
</html>