<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº¬éƒ½ãƒ»æ»‹è³€ æ—…ã®ã—ãŠã‚Š</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">

    <style>
        /* äº¬éƒ½ãƒ»æ»‹è³€ æ—…ã®ã—ãŠã‚Šãƒ†ãƒ¼ãƒï¼ˆæš–è‰²ç³»ï¼‰ */
        :root {
            --primary-color: #ed6d3d; /* æ·±ã„ã‚ªãƒ¬ãƒ³ã‚¸ */
            --bg-color: #fdfcf8;      /* å’Œç´™ã®ã‚ˆã†ãªã‚ªãƒ•ãƒ›ãƒ¯ã‚¤ãƒˆ */
            --text-color: #4a3b32;    /* ç„¦ã’èŒ¶è‰² */
        }

        body {
            font-family: "Hiragino Mincho ProN", "Yu Mincho", serif;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            text-align: center;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆè¡¨ç´™ï¼‰ */
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 60px 20px;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: 0 4px 10px rgba(237, 109, 61, 0.3);
            /* ãƒ›ãƒ¼ãƒ ãƒœã‚¿ãƒ³ã‚’æ¶ˆã—ãŸã®ã§ position: relative ã¯ä¸è¦ã§ã™ãŒã€ãã®ã¾ã¾ã§ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ */
        }
        
        h1 {
            margin: 0;
            font-size: 28px;
            letter-spacing: 2px;
            font-weight: normal;
        }
        
        .date {
            margin-top: 10px;
            font-size: 16px;
            opacity: 0.9;
            font-family: sans-serif;
        }

        /* ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */
        .menu {
            padding: 40px 20px 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 400px;
            margin: 0 auto;
        }

        /* ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .menu-btn {
            display: block;
            background-color: white;
            color: var(--primary-color);
            text-decoration: none;
            padding: 20px;
            border-radius: 15px;
            border: 2px solid var(--primary-color);
            font-weight: bold;
            font-family: sans-serif;
            transition: all 0.2s;
            box-shadow: 0 4px 0 rgba(237, 109, 61, 0.2);
            position: relative;
        }

        .menu-btn:active {
            transform: translateY(2px);
            box-shadow: none;
            background-color: #fff5f0;
        }

        .icon {
            font-size: 24px;
            margin-right: 10px;
            vertical-align: middle;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            margin-top: 20px;
            font-size: 12px;
            color: #888;
            padding-bottom: 20px;
            font-family: sans-serif;
        }

        /* =========================================
           ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é…ç½®ç‰ˆï¼‰
           ========================================= */
        
        #chara-container {
            position: relative; 
            margin: 60px auto 20px; /* ä¸Šãƒ»å·¦å³ãƒ»ä¸‹ ã®ä½™ç™½ */
            width: 180px;           /* ã‚­ãƒ£ãƒ©ã®å¹… */
            z-index: 10;
            cursor: pointer;
            text-align: center;
        }

        #chara-img {
            width: 100%;
            height: auto;
            filter: drop-shadow(3px 3px 0px rgba(0,0,0,0.2)); 
            display: block;
            margin: 0 auto;
        }
        
        /* ã‚¿ãƒƒãƒ—ã—ãŸæ™‚ã®å‹•ã */
        #chara-container:active #chara-img {
            transform: scale(0.95) translateY(5px);
        }

        /* å¹ãå‡ºã—ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        #speech-bubble {
            position: absolute;
            bottom: 100%;    /* ã‚­ãƒ£ãƒ©ã®çœŸä¸Šã«é…ç½® */
            left: 50%;       /* å·¦å³ä¸­å¤® */
            transform: translateX(-50%); /* å®Œå…¨ã«çœŸã‚“ä¸­ã¸ */
            
            width: 260px;
            
            /* ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼ã«åˆã‚ã›ãŸãƒ‡ã‚¶ã‚¤ãƒ³ */
            background: #fff;
            color: #4a3b32;
            border: 3px solid #ed6d3d;
            border-radius: 12px;
            padding: 15px;
            
            font-family: 'DotGothic16', sans-serif;
            font-size: 16px;
            line-height: 1.6;
            
            display: none; /* æœ€åˆã¯éš ã™ */
            box-shadow: 4px 4px 0px rgba(237, 109, 61, 0.2);
            z-index: 1001;
        }

        /* å¹ãå‡ºã—ã®ã—ã£ã½ï¼ˆæ ç·šï¼‰ */
        #speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #ed6d3d transparent transparent transparent;
        }
        
        /* å¹ãå‡ºã—ã®ã—ã£ã½ï¼ˆç™½å¡—ã‚Šï¼‰ */
        #speech-bubble::before {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 7px 7px 0;
            border-style: solid;
            border-color: #fff transparent transparent transparent;
            z-index: 1;
        }

        /* â–¼â–¼â–¼ ãƒ‡ãƒãƒƒã‚°ã‚¨ãƒªã‚¢ï¼ˆå‹•ä½œç¢ºèªç”¨ï¼‰ â–¼â–¼â–¼ */
        #debug-area {
            background-color: #eee;
            color: #333;
            padding: 15px;
            margin: 30px auto;
            border-radius: 10px;
            max-width: 90%;
            font-family: sans-serif;
            font-size: 14px;
            text-align: center;
            border: 2px dashed #999;
        }

        #debug-area h3 {
            margin-top: 0;
            font-size: 16px;
        }

        .debug-btn {
            background: #fff;
            border: 1px solid #ccc;
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
        }
        .debug-btn:hover {
            background: #ddd;
        }
        .current-time-display {
            font-weight: bold;
            color: #ed6d3d;
            margin-top: 10px;
        }
    </style>
</head>
<body>

    <header>
        <h1>ã«ã“ã¡ã‚ƒã‚“<br>èª•ç”Ÿæ—¥æ—…è¡Œ</h1>
        <div class="date">2025.12.24 - 12.25</div>
    </header>

    <div class="menu">
        <p>æ—…ã®æº–å‚™ã‚’å§‹ã‚ã¾ã—ã‚‡ã†</p>

        <a href="mochimono.html" class="menu-btn">
            <span class="icon">ğŸ‘œ</span> æŒã¡ç‰©ãƒªã‚¹ãƒˆ
        </a>

        <a href="schedule.html" class="menu-btn">
            <span class="icon">ğŸ“…</span> ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        </a>

        <a href="memories.html" class="menu-btn">
            <span class="icon">ğŸ“¸</span> æ€ã„å‡ºã‚¢ãƒ«ãƒãƒ 
        </a>

        <a href="#" class="menu-btn" style="opacity: 0.5; cursor: default;">
            <span class="icon">ğŸ—ºï¸</span> ãƒãƒƒãƒ— (æº–å‚™ä¸­)
        </a>
    </div>

    <div id="chara-container" onclick="talk()">
        <div id="speech-bubble"></div>
        <img id="chara-img" src="images/chara.png" alt="æ¡ˆå†…ã‚­ãƒ£ãƒ©">
    </div>

    <footer>
        Have a nice trip!
    </footer>

    <div id="debug-area">
        <h3>ğŸ”§ å‹•ä½œç¢ºèªãƒ¢ãƒ¼ãƒ‰</h3>
        <p>æ™‚é–“ã‚’å½è£…ã—ã¦ã€ã‚­ãƒ£ãƒ©ã®åå¿œãƒ†ã‚¹ãƒˆãŒã§ãã¾ã™</p>
        
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T14:00')">ğŸ„ 1æ—¥ç›®(12/24)</button>
        <button class="debug-btn" onclick="setFakeTime('2025-12-25T14:00')">ğŸ 2æ—¥ç›®(12/25)</button>
        <br>
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T07:00')">â˜€ï¸ æœ (7:00)</button>
        <button class="debug-btn" onclick="setFakeTime('2025-12-24T23:00')">ğŸŒ™ å¤œ (23:00)</button>
        <br>
        <div style="margin-top:5px;">
            <input type="datetime-local" id="manualDebugTime">
            <button class="debug-btn" onclick="setManualTime()">é©ç”¨</button>
        </div>
        
        <button class="debug-btn" onclick="resetTime()" style="background:#ffcccc; margin-top:10px;">ãƒªã‚»ãƒƒãƒˆï¼ˆç¾åœ¨æ™‚åˆ»ã«æˆ»ã™ï¼‰</button>
        
        <div class="current-time-display" id="debug-display">ç¾åœ¨æ™‚åˆ»: é€šå¸¸ãƒ¢ãƒ¼ãƒ‰</div>
    </div>

    <script>
        // === è¨­å®šã‚¨ãƒªã‚¢ ===
        let tapCount = 0;
        let isTyping = false;
        let typingTimer = null;
        
        // â˜…ãƒ‡ãƒãƒƒã‚°ç”¨ï¼šæ™‚é–“ã‚’ä¸Šæ›¸ãã™ã‚‹å¤‰æ•°
        let currentTimeOverride = null;

        // 1. é€šå¸¸ã®ã‚»ãƒªãƒ•
        const normalTexts = [
            "äº¬éƒ½ã¸ã‚ˆã†ã“ãï¼",
            "ä¸Šã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰\nã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ç¢ºèªã§ãã‚‹ã‚ˆã€‚",
            "æº–å‚™ã¯ãƒãƒƒãƒãƒªï¼Ÿ",
            "ã‚¿ãƒƒãƒ—ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ã€‚",
            "æ¥½ã—ã¿ã ã­ï¼",
            "åƒ•ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ã‚‚\nä½•ã‚‚å‡ºãªã„ã‚ˆ...å¤šåˆ†ã€‚",
            "ãŠåœŸç”£ã¯ä½•ã‚’è²·ã†äºˆå®šï¼Ÿ"
        ];

        // 2. ç‰¹å®šã®æ—¥ä»˜ï¼ˆæ—…è¡Œå½“æ—¥ï¼‰ã®ã‚»ãƒªãƒ•
        const dateTexts = {
            "12/24": [
                "ã¤ã„ã«å½“æ—¥ã ã­ï¼\nãƒ¡ãƒªãƒ¼ã‚¯ãƒªã‚¹ãƒã‚¹ï¼",
                "æ–°å¹¹ç·šã®æ™‚é–“ã¯å¤§ä¸ˆå¤«ï¼Ÿ",
                "ä»Šæ—¥ã¯ãŸãã•ã‚“æ­©ãã‚ˆï½"
            ],
            "12/25": [
                "æ—…è¡Œ2æ—¥ç›®ï¼\nä»Šæ—¥ã‚‚æ¥½ã—ã‚‚ã†ï¼",
                "è¶³ã€ç—›ããªã„ï¼Ÿ",
                "å¸°ã‚ŠãŸããªã„ãªã..."
            ]
        };

        // 3. ç‰¹å®šã®æ™‚é–“å¸¯ã®ã‚»ãƒªãƒ•
        const timeTexts = {
            morning: ["ãŠã¯ã‚ˆã†ï¼\næ—©èµ·ãã ã­ã€‚", "æœã”ã¯ã‚“ã¯é£Ÿã¹ãŸï¼Ÿ"],
            night:   ["ã‚‚ã†å¤œã ã‚ˆã€‚\næ˜æ—¥ã«å‚™ãˆã¦å¯ã‚ˆã†ã€‚", "â€¦â€¦Zzz"]
        };

        // 4. é€£æ‰“ã•ã‚ŒãŸæ™‚ã®ã‚»ãƒªãƒ•
        const annoyedTexts = [
            "â€¦â€¦ã€‚",
            "ãã‚“ãªã«è§¦ã‚‰ãªã„ã§ã€‚",
            "ã—ã¤ã“ã„ãªã‚ã€‚",
            "ã‚‚ã—ã‹ã—ã¦ã€\nãƒ’ãƒãªã®ï¼Ÿ",
            "ã‚±ãƒ„ã‚¤ãŒã¿ãªãã£ã¦ããŸã€‚"
        ];

        // === ãƒ¡ã‚¤ãƒ³æ©Ÿèƒ½ ===

        function talk() {
            const bubble = document.getElementById('speech-bubble');
            
            if (isTyping) {
                clearTimeout(typingTimer);
                isTyping = false;
            }

            tapCount++;
            let message = "";

            // â˜…é‡è¦ï¼šãƒ‡ãƒãƒƒã‚°æ™‚åˆ»ãŒã‚ã‚Œã°ãã‚Œã‚’ä½¿ã„ã€ãªã‘ã‚Œã°ç¾åœ¨æ™‚åˆ»ã‚’ä½¿ã†
            const now = currentTimeOverride ? new Date(currentTimeOverride) : new Date();
            
            const dateStr = (now.getMonth() + 1) + "/" + now.getDate(); // ä¾‹: "12/24"
            const hour = now.getHours();

            // ãƒ‡ãƒãƒƒã‚°è¡¨ç¤ºã®æ›´æ–°ï¼ˆç¢ºèªç”¨ï¼‰
            updateDebugDisplay(now);

            // --- æ¡ä»¶åˆ†å²ãƒ­ã‚¸ãƒƒã‚¯ ---

            // å„ªå…ˆåº¦1: ã‚¿ãƒƒãƒ—é€£æ‰“ï¼ˆ10å›ä»¥ä¸Šã‹ã¤30%ã®ç¢ºç‡ï¼‰
            if (tapCount > 10 && Math.random() < 0.3) {
                 message = pickRandom(annoyedTexts);
            }
            // å„ªå…ˆåº¦2: æ—¥ä»˜åˆ¤å®š
            else if (dateTexts[dateStr]) {
                message = pickRandom(dateTexts[dateStr]);
            }
            // å„ªå…ˆåº¦3: æœï¼ˆ5æ™‚ã€œ9æ™‚ï¼‰
            else if (hour >= 5 && hour <= 9) {
                message = pickRandom(timeTexts.morning);
            }
            // å„ªå…ˆåº¦4: å¤œï¼ˆ22æ™‚ã€œ4æ™‚ï¼‰
            else if (hour >= 22 || hour <= 4) {
                message = pickRandom(timeTexts.night);
            }
            // ãã‚Œä»¥å¤–: é€šå¸¸
            else {
                message = pickRandom(normalTexts);
            }

            // å¹ãå‡ºã—è¡¨ç¤º
            bubble.style.display = "block";
            bubble.innerHTML = "";
            typeWriter(message, bubble, 0);
        }

        // --- è£œåŠ©é–¢æ•° ---

        function pickRandom(array) {
            return array[Math.floor(Math.random() * array.length)];
        }

        function typeWriter(text, element, index) {
            isTyping = true;
            if (text.charAt(index) === "\n") {
                element.innerHTML += "<br>";
            } else {
                element.innerHTML += text.charAt(index);
            }

            if (index < text.length - 1) {
                const speed = 50 + Math.random() * 50; 
                typingTimer = setTimeout(() => {
                    typeWriter(text, element, index + 1);
                }, speed);
            } else {
                isTyping = false;
            }
        }

        // --- ãƒ‡ãƒãƒƒã‚°ç”¨æ©Ÿèƒ½ ---

        function setFakeTime(timeStr) {
            currentTimeOverride = timeStr;
            const fakeDate = new Date(timeStr);
            alert(`ç¾åœ¨æ™‚åˆ»ã‚’ã€${timeStr}ã€‘ã«è¨­å®šã—ã¾ã—ãŸã€‚\nã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’ã‚¿ãƒƒãƒ—ã—ã¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚`);
            updateDebugDisplay(fakeDate);
            
            // ã‚¿ãƒƒãƒ—å›æ•°ã‚‚ãƒªã‚»ãƒƒãƒˆã—ã¦åå¿œã—ã‚„ã™ãã™ã‚‹
            tapCount = 0; 
        }

        function setManualTime() {
            const val = document.getElementById('manualDebugTime').value;
            if(val) setFakeTime(val);
        }

        function resetTime() {
            currentTimeOverride = null;
            alert("æœ¬æ¥ã®ç¾åœ¨æ™‚åˆ»ã«æˆ»ã—ã¾ã—ãŸã€‚");
            updateDebugDisplay(new Date());
        }

        function updateDebugDisplay(dateObj) {
            const display = document.getElementById('debug-display');
            const str = `${dateObj.getMonth()+1}/${dateObj.getDate()} ${dateObj.getHours()}:${String(dateObj.getMinutes()).padStart(2,'0')}`;
            const status = currentTimeOverride ? "å½è£…ä¸­" : "é€šå¸¸";
            display.innerText = `ç¾åœ¨æ™‚åˆ»(${status}): ${str}`;
        }
    </script>
</body>
</html>